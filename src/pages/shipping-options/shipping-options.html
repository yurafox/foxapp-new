<ion-header>
  <main-toolbar [showCartIcon]="false" [showSearchButton]="false"></main-toolbar>
</ion-header>

<ion-content class="f-size-larger">
  <ion-grid>
    <ion-row>
      <ion-col class="f-section-header"><span loc="Выберите доставку" name="ChooseShippingOptions">{{locale['ChooseShippingOptions']}}</span>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid>
    <ion-row padding *ngIf="dataLoaded">
      <ion-col>
        <span><span loc="Посылка" name="Shipment">{{locale['Shipment']}}</span> {{itemIndex+1}} <span loc="из" name="Of">{{locale['Of']}}</span> {{this.cart.loShipments.length}}</span>
        <br>
        <ul class="f-ul">
          <li *ngFor="let itm of this.cart.loShipments[itemIndex].shipmentItems">
            <span class="f-size-default"><b>{{cart.getCartOrderProductById(itm.idOrderSpecProd)?.quotationproduct?.product?.name}}</b></span>
          </li>
        </ul>
      </ion-col>
    </ion-row>


    <ion-row *ngIf="dataLoaded">
      <ion-col class="f-padding-lr-15">
        <b><span><span loc="Выберите вариант доставки" name="ChooseDeliveryOption">{{locale['ChooseDeliveryOption']}}</span>:</span></b>
      </ion-col>
    </ion-row>

    <div *ngFor="let opt of cart.loShipmentDeliveryOptions" style="padding-left: 5px; padding-right: 5px;">
      <ion-row *ngIf="opt.itemIdx === itemIndex">

        <ion-grid class="f-border-ligthgray" *ngIf="dataLoaded">

          <ion-row (click)="onSelectOptionClick(opt)">
            <ion-col col-2 text-center>
              <div class="pure-radiobutton">
                <input type="radio" id="radioButton" class="radio" [checked]="opt.isChecked">
                <label for="radioButton"></label>
              </div>
            </ion-col>
            <ion-col class="f-size-larger">
              <span loc="Получите" name="GetIt">{{locale['GetIt']}}</span> <span class="f-color-green">{{opt.deliveryDate | date: 'fullDate'}}</span>
              <br>
              <span *ngIf="!(opt.deliveryCost === 0)">
                <span loc="Стоимость доставки" name="DeliveryCost">{{locale['DeliveryCost']}}</span> <span class="f-color-green" >{{opt.deliveryCost | localeCurrency:userService.currency}} </span>
              </span>
              <span *ngIf="(opt.deliveryCost === 0)">
                <span class="f-color-green"><b><span loc="БЕСПЛАТНАЯ доставка" name="FreeDelivery">{{locale['FreeDelivery']}}</span></b></span>
              </span>
              <br>

              <span *ngIf="opt.loName" loc="Доставляется" name="DeliveryBy">{{locale['DeliveryBy']}}</span> <span class="f-color-green">{{opt.loName}}</span>
              <span *ngIf="opt.pickupLocationName" loc="Самовивоз" name="PickupPlace">{{locale['PickupPlace']}}</span> <span class="f-color-green">{{opt.pickupLocationName}}</span>

            </ion-col>
          </ion-row>

        </ion-grid>
      </ion-row>
    </div>


    <ion-row *ngIf="dataLoaded">
      <ion-col class="f-padding-lr-5">
        <button class="f-btn-action" ion-button block
                [attr.disabled]="!isAnyOptionSelected()?'':null"
                (click)="onContinueClick()"><span loc="Далее" name="Continue">{{locale['Continue']}}</span></button>
      </ion-col>
    </ion-row>


  </ion-grid>
</ion-content>
